# Shared manifest between Kinoite & Kinoite Mobile

packages:
  # Install some minor optional tools for KInfoCenter
  - vulkan-tools
  - xdpyinfo
  # Includes a KIO & KCM (can not be Flatpak'ed), used by Dolphin and Gwenview
  # See https://pagure.io/fedora-kde/SIG/issue/291
  - kamera
  # Make sure that previous Anaconda dependencies are kept in the image
  # See: https://pagure.io/fedora-kde/SIG/issue/243
  - mobile-broadband-provider-info
  # Make sure that modem support is installed
  - NetworkManager-ppp
  # Install gdb to make getting backtraces work with DrKonqi
  - gdb
  # Make sure rpm-ostree support is installed
  - plasma-discover-rpm-ostree

# Make sure the following are not pulled in when Recommended by other packages
exclude-packages:
  - plasma-discover-offline-updates
  - plasma-discover-packagekit
  - plasma-pk-updates
  # Manually excluded as recommended by gtk3 (and likely gtk4 in the future)
  # See https://pagure.io/fedora-kde/SIG/issue/124
  - tracker
  - tracker-miners
  - localsearch
  - tinysparql
  # Ensure we do not include X11 support
  - plasma-x11
  - plasma-workspace-x11
  # Exclude mariadb server tools that bring in Perl
  - mariadb-server-utils
  # Can only be excluded on variants that do not include GNOME Software
  - PackageKit-glib

# Kinoite specific workarounds and configuration
postprocess:
  - |
    #!/bin/bash
    set -xeuo pipefail

    # Enable weekly auto updates in Discover. In the future, Flatpaks will be
    # updated daily. See: https://bugs.kde.org/show_bug.cgi?id=454422
    cat > /etc/xdg/PlasmaDiscoverUpdates <<EOF
    [Global]
    UseUnattendedUpdates=true
    RequiredNotificationInterval=604800
    EOF
